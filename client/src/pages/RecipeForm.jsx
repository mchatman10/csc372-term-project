import { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import { API } from '../util/api'
import styles from './RecipeForm.module.css'
export default function RecipeForm() { const [form, setForm] = useState({ title: '', description: '', ingredients: '', steps: '', image_url: '', category: null }); const [error, setError] = useState(''); const nav = useNavigate(); function handle(e) { setForm(f => ({ ...f, [e.target.name]: e.target.value })) } async function submit(e) { e.preventDefault(); setError(''); try { const payload = { ...form, ingredients: form.ingredients.split('\n').filter(Boolean), steps: form.steps.split('\n').filter(Boolean) }; const { id } = await API.createRecipe(payload); nav(`/recipe/${id}`) } catch (err) { setError(err.message || 'Failed to save') } } return (<div className='container'><form className={`card ${styles.form}`} onSubmit={submit}><h2>Add a recipe</h2>{error && <div className='error'>{error}</div>}<div className={styles.row}><input className='input' name='title' placeholder='Title' value={form.title} onChange={handle} /><input className='input' name='image_url' placeholder='Image URL' value={form.image_url} onChange={handle} /></div><input className='input' name='category' placeholder='Category (Breakfast/Lunch/Dinner)' value={form.category || ''} onChange={handle} /><textarea className='textarea' rows='3' name='description' placeholder='Short description' value={form.description} onChange={handle}></textarea><textarea className='textarea' rows='6' name='ingredients' placeholder='Ingredients (one per line)' value={form.ingredients} onChange={handle}></textarea><textarea className='textarea' rows='6' name='steps' placeholder='Steps (one per line)' value={form.steps} onChange={handle}></textarea><button className='btn'>Save</button></form></div>) }